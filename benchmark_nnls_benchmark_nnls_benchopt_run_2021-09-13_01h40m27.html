
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ“ˆ</text></svg>">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <title>Result on nnls benchmark</title>

        <style>
            /*
   Comprehensive Base Stylesheet - https://fvsch.com/base-stylesheet/
   Makes browser default styles more consistent, creating a canvas that you
   should modify for your project. Fully commented. Last update: 2011-10-02.
*/

/* CONTAINERS */
body {
  margin: auto;
  max-width: 70em;
  padding: 1.5em 3% 8em; /* Browsers have default 8px margins _or_ padding! */
  font-size: 100%; /* See: http://www.informationarchitects.jp/en/100e2r/ */
  line-height: 1.5; /* Default value, `normal`, depends on the font */
  font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji; /* ripoff from github */
}
/* HTML5 blocks - needed in older browsers */
article, aside, figcaption, figure, footer, header, nav, section {
  display: block;
}

/* PARAGRAPHS */
h1, h2, h3, h4 {
  line-height: 1.25; /* Bigger text is often nicer with smaller line height */
  font-weight: bold; /* Browser default. Use `normal` for less bulky titles */
}
h1 {
    margin: 0.5em 0 .5em; /* Titles should be close to the text they describe */
    font-size: 2em;
}
h2 {
    margin: 2em 0 .5em; /* Titles should be close to the text they describe */
    font-size: 1.5em;}
h3 {
    margin: 3em 0 .5em; /* Titles should be close to the text they describe */
    font-size: 1.2em;}
h4 {
    margin: 1.5em 0 .5em; /* Titles should be close to the text they describe */
    font-size: 1em;
}
ul, ol {
  margin: 1em 0; /* Default for all browsers except IE */
  padding-left: 40px; /* IE has a 40px margin-left instead */
}
p {
  margin: 1em 0;
}
blockquote {
  margin: 1em 40px; /* Same for all browsers - Customize or remove */
}
figure {
  margin: 1em 0; /* Default in HTML5 spec: `1em 40px` */
}

/* LINKS */
/* Default browser styles (from Firefox, similar in most browsers) */
a {
  text-decoration: none;
}
a:link,
a:visited {
    color: DodgerBlue;
}
a:active {
    color: #EE0000;
}
/* Add your own styles for hover _and_ focus styles */
a:hover, a:focus {
  text-decoration: none;
}
/* Remove dotted outline clicked links - Keeps outline on focus */
a:active, a:hover {
  outline: none;
}
/* No border around images in links */
a img {
  border: none;
}

/* MISC TEXT-LEVEL ELEMENTS */
/* Make quotations and references more visible */
q, cite {
  font-style: italic;
}
/* Remove automatic quotation marks for inline quotations
   (`q {quotes:none}` not implemented in WebKit) */
q:before, q:after {
  content: "";
}
/* Stopping superscript and subscript from adding to the line's leading */
sup, sub {
  line-height: 0;
}

/* FORMS */
fieldset {
  margin: 0; /* Common default is `0 2px` */
  padding: 0; /* Common default (roughly): `.35em .625em .75em` */
  border: none;
}
input, button, select {
  vertical-align: middle; /* Helps keep form elements roughly aligned */
}

select {
  border: 1px solid #aaa;
  border-radius: 3px;
  padding: 5px;
  background-color: transparent;
  padding: 4px;
  color: #333;
}

/* TABLES */
table {
  border-collapse: collapse; /* Merges cell borders together */
  /* Browser default: border-collapse: separate; border-spacing: 2px; */
}
td, th {
  padding: 1px; /* Same as browser default - set to "0" to remove padding */
  vertical-align: top; /* Default is "middle" */
  text-align: left; /* Default for TH elements is "center" */
}
td:first-child, th:first-child {
  empty-cells: hide; /* Hide empty cells when they're the first in the row */
}

/* Custom stuff on top of the base style sheet */
.status {
    font-weight: bold;
    font-family: monospace;
    color: white;
    padding: .25em .4em;
    border-radius: .2em;
}
.success {
    background-color: forestgreen;
}
.failure {
    background-color: orangered;
}
.error {
    background-color: firebrick;
}

.summary a {
    font-weight: 500;
}

.highlight {
    margin: 0;
}

.highlight pre {
    padding: 1em;
    border: 1px solid #eee;
    background-color: #f5f5f5;
    margin-bottom: 0.1em;
    overflow-x: auto;
}

.source {
    margin: 0.3em 0 2em;
    font-size: 90%;
}

.source a:visited,
.source a:link {
    color: #666;
    text-decoration: underline;
}
.source a:hover, a:focus {
    color: #666;
    text-decoration: underline;
}

/* Pandas dataframe css */
/* Taken from: https://github.com/spatialaudio/nbsphinx/blob/fb3ba670fc1ba5f54d4c487573dbc1b4ecf7e9ff/src/nbsphinx.py#L587-L619 */

table.dataframe {
  border: none !important;
  border-collapse: collapse;
  border-spacing: 0;
  border-color: transparent;
  color: black;
  font-size: .9em;
  table-layout: fixed;
  border-radius:6px;
}
table.datatable {
  border-radius:6px;
}
table.dataframe thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
table.dataframe tr,
table.dataframe th,
table.dataframe td {
  text-align: left;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
table.dataframe th {
  font-weight: bold;
}
table.dataframe tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
table.datatable.display tbody tr:hover {
  background-color: #ddd !important;
}
a.anchor:visited,
a.anchor:link {
    padding-left: .2em;
    color: #999;
}
div.dataTables_filter, div.dataTables_length {
  padding: 20px;
}

.backtotop {
    text-decoration: none;
    display: flex;
    position: fixed;
    font-size: 50px;
    right: 40px;
    bottom: 40px;
    align-items: center;
    justify-content: center;
    order: 2;
    margin-left: auto;
    z-index: 999;
}

.priority1 {
    color: purple;
}
.priority2 {
    color: firebrick;
}
.priority3 {
    color: chocolate;
}
td.number {
  text-align: right;
}

/* Style buttons */
.btn {
  background-color: DodgerBlue; /* Blue background */
  border: none; /* Remove borders */
  color: white; /* White text */
  padding: 12px 16px; /* Some padding */
  font-size: 16px; /* Set a font size */
  cursor: pointer; /* Mouse pointer on hover */
  min-height: 46px;
  /**
   * Vertically align the icon and the text
   * inside the button
   */
  display: inline-flex;
  flex-direction: row;
  align-items: center;
}

/* Darker background on mouse-over */
.btn:hover {
  background-color: RoyalBlue;
}

/* The main part of the page should adapt to the presence of the sidebar */
.main {
  margin-left: 200px; /* same as sidebar width to avoid overlaps */
  padding: 1px 16px;
  height: 1000px;
}

.btn svg {
  width: 1.5rem;
  height: 1.5rem;
  color: white;
}

/* Select all elements after any other element in a .btn */
.btn > * + * {
  margin-left: 0.5rem;
}

.space-r-4 > * {
  margin-right: 1rem;
}

#btn_subinfo:hover {
  cursor: pointer;
}

#btn_subinfo svg {
  width: 1rem;
  height: 1rem;
}

#plot_legend {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  padding: 10px;
}

#legend_title {
  font-size: 1.2rem;
  font-weight: bold;
}

#legend_help {
  font-size: 0.75rem;
  color: #475569;
}


            /*----------------------------------------*/
/***** Stylesheet for the hover index *****/
/*----------------------------------------*/

/* Place rectangles in a grid */
.grid {
  position: relative; /* each rectangle is dependant of others */
  margin: 0 auto;
  padding: 1em 0 4em; /* padding top horizontal bottom */
  display: grid; /* type of boxes generated */
  max-width: 1000px;
  list-style: none; /* no item */
  text-align: center;
  column-gap: 2em; /* space between columns */
}

/* Figure inside grid */
.grid figure {
  position: relative;
  float: left;
  overflow: hidden; /* overflow not taken into account */
  margin: 10px 1%;
  width: 100%; /* 100% of the column */
  background: #3085a3;
  text-align: center;
  cursor: pointer; /* change shape cursor */
  border-radius: 30px; /* rounded corners */
}

/* Each figure contains an img */
.grid figure img {
  position: relative;
  display: block;
  max-height: 100%;
  max-width: 100%;
  opacity: 1; /* over a dummy image */
}

/* Style caption (title of benchmarks) */
.grid figure figcaption {
  padding: 0.1em; /* add space */
  color: #fff; /* writing color */
  text-transform: uppercase; /* title in uppercase */
  font-size: 1.25em;
}

/* Small sized screens */
@media (min-width: 600px) {
  .grid {
    grid-template-columns: repeat(2, 1fr);
  } /* split in 2 columns */
}

/* Larger sized screens */
@media (min-width: 900px) {
  .grid {
    grid-template-columns: repeat(3, 1fr);
  } /* split in 3 columns */
}

/* Position and style of <a> elements (the View more) */
.grid figure figcaption,
.grid figure figcaption > a {
  position: absolute;
  top: 0em; /* no space offset top */
  left: 0;
  width: 100%;
  height: 100%;
}

/* only to figcaption <a> tag */
.grid figure figcaption > a {
  z-index: 1000; /* top level */
  text-indent: 0%;
  white-space: nowrap;
  font-size: 0; /* do not display the View more */
  opacity: 1;
}

/* h2: Problem name (LASSO, ...) */
.grid figure h2 {
  word-spacing: 0em;
  font-weight: 300;
}

.grid figure h2 span {
  font-weight: 800;
}

.grid figure h2,
.grid figure p {
  margin: 0;
}

/* p: number of files */
.grid figure p {
  letter-spacing: 1px;
  font-size: 70%;
}

/* Default color */
figure.effect-ruby {
  background-color: #2c3e50;
}

/* Color when hovering */
figure.effect-ruby:hover {
  background-color: DodgerBlue;
}

/* Define transformation */
figure.effect-ruby img {
  opacity: 0;
  transition: opacity 0.35s, transform 0.35s; /* transition time */
  transform: scale(1.15); /* size transformation -> bigger */
}

/* transformation with hovering */
figure.effect-ruby:hover img {
  opacity: 0;
  transform: scale(1); /* size -> smaller */
}

/* Apply effect to problem name */
figure.effect-ruby h2 {
  margin-top: 10; /* default margin */
  transition: transform 0.35s; /* transition time */
  transform: translate3d(0, 40px, 0);
  font-size: 1.25em; /* default font */
}

figure.effect-ruby p {
  margin: 2em -1em 2em -1em;
  padding: 1em 0em 1em 0em;
  border: 1px solid #fff; /* create sort of white frame */
  opacity: 0;
  transition: opacity 0.35s, transform 0.35s;
  transform: translate3d(0, 20px, 0) scale(1.1); /* size transform */
}

/* Transform title on hover */
figure.effect-ruby:hover h2 {
  -webkit-transform: translate3d(0, 0, 0);
  transform: translate3d(0px, 10px, 0) scale(0.8); /* smaller */
  margin-top: 0em; /* move up */
}

figure.effect-ruby:hover p {
  opacity: 1;
  transform: translate3d(0, 0, 0) scale(1.2); /* placement in box */
}

/* Button for inside the table with system informations */
.buttoncent {
  border: none;
  background-color: transparent;
  outline: none;
  text-align: center;
}

/* button for inside text
 in benchmark page above graph for system informations */
.buttonleft {
  border: none;
  background-color: transparent;
  outline: none;
  text-align: center;
  margin-left: 1px; /* add margin */
}


/* switch slider with an adaptable height.
Change switch-height and switch-padding, and all the dimensions are adjusted.
See https://stackoverflow.com/questions/70590125/how-to-change-the-size-of-a-css-toggle-switch */
* {
  --switch-height: 20px;
  --switch-padding: 2px;
  --switch-width: calc((var(--switch-height) * 2) - var(--switch-padding));
  --slider-height: calc(var(--switch-height) - var(--switch-padding));
  --slider-on: calc(var(--switch-height) - var(--switch-padding));
}

.switch {
  position: relative;
  display: inline-block;
  width: var(--switch-width);
  height: var(--switch-height);
}

.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  -webkit-transition: .4s;
  transition: .4s;
}

.slider:before {
  content: "";
  position: absolute;
  height: var(--slider-height);
  width: var(--slider-height);
  left: calc(var(--switch-padding) / 2);
  bottom: calc(var(--switch-padding) / 2);
  background-color: white;
  -webkit-transition: .4s;
  transition: .4s;
}

input:checked+.slider {
  background-color: #2196F3;
}

input:focus+.slider {
  box-shadow: 0 0 1px #2196F3;
}

input:checked+.slider:before {
  transform: translateX(var(--slider-on));
}

.slider.round {
  border-radius: var(--slider-height);
}

.slider.round:before {
  border-radius: 50%;
}

        </style>
    </head>
    <body>
        <a id="top"></a>
        <a href="index.html">
            <button class="btn">
                <svg xmlns="http://www.w3.org/2000/svg" fill="#ffffff" viewBox="0 0 576 512">
    <path d="M511.8 287.6L512.5 447.7C512.5 450.5 512.3 453.1 512 455.8V472C512 494.1 494.1 512 472 512H456C454.9 512 453.8 511.1 452.7 511.9C451.3 511.1 449.9 512 448.5 512H392C369.9 512 352 494.1 352 472V384C352 366.3 337.7 352 320 352H256C238.3 352 224 366.3 224 384V472C224 494.1 206.1 512 184 512H128.1C126.6 512 125.1 511.9 123.6 511.8C122.4 511.9 121.2 512 120 512H104C81.91 512 64 494.1 64 472V360C64 359.1 64.03 358.1 64.09 357.2V287.6H32.05C14.02 287.6 0 273.5 0 255.5C0 246.5 3.004 238.5 10.01 231.5L266.4 8.016C273.4 1.002 281.4 0 288.4 0C295.4 0 303.4 2.004 309.5 7.014L416 100.7V64C416 46.33 430.3 32 448 32H480C497.7 32 512 46.33 512 64V185L564.8 231.5C572.8 238.5 576.9 246.5 575.8 255.5C575.8 273.5 560.8 287.6 543.8 287.6L511.8 287.6z"/>
</svg>

            </button>
        </a>
        <a href="benchmark_nnls.html">
            <button class="btn">
                <svg xmlns="http://www.w3.org/2000/svg" fill="#ffffff" viewBox="0 0 448 512"><path d="M447.1 256C447.1 273.7 433.7 288 416 288H109.3l105.4 105.4c12.5 12.5 12.5 32.75 0 45.25C208.4 444.9 200.2 448 192 448s-16.38-3.125-22.62-9.375l-160-160c-12.5-12.5-12.5-32.75 0-45.25l160-160c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25L109.3 224H416C433.7 224 447.1 238.3 447.1 256z"/></svg>

                <span>
                    nnls
                </span>
            </button>
        </a>
        <a href="outputs/benchmark_nnls_benchopt_run_2021-09-13_01h40m27.csv">
            <button class="btn">
                <svg xmlns="http://www.w3.org/2000/svg" fill="#ffffff" viewBox="0 0 512 512"><path d="M480 352h-133.5l-45.25 45.25C289.2 409.3 273.1 416 256 416s-33.16-6.656-45.25-18.75L165.5 352H32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h448c17.67 0 32-14.33 32-32v-96C512 366.3 497.7 352 480 352zM432 456c-13.2 0-24-10.8-24-24c0-13.2 10.8-24 24-24s24 10.8 24 24C456 445.2 445.2 456 432 456zM233.4 374.6C239.6 380.9 247.8 384 256 384s16.38-3.125 22.62-9.375l128-128c12.49-12.5 12.49-32.75 0-45.25c-12.5-12.5-32.76-12.5-45.25 0L288 274.8V32c0-17.67-14.33-32-32-32C238.3 0 224 14.33 224 32v242.8L150.6 201.4c-12.49-12.5-32.75-12.5-45.25 0c-12.49 12.5-12.49 32.75 0 45.25L233.4 374.6z"/></svg>

                <span>
                    benchmark_nnls_benchopt_run_2021-09-13_01h40m27.csv
                </span>
            </button>
        </a>
        <h1 style:>Result on nnls benchmark</h1>
        <summary></summary>

        <!--Display all system informations if you want to-->
        <p>System informations:
            <b>CPU</b>: 72
            <b>RAM (GB)</b>: 376
            <button id="btn_subinfo" class="button buttonleft toggle">
                <svg id="btn_plus" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM256 368C269.3 368 280 357.3 280 344V280H344C357.3 280 368 269.3 368 256C368 242.7 357.3 232 344 232H280V168C280 154.7 269.3 144 256 144C242.7 144 232 154.7 232 168V232H168C154.7 232 144 242.7 144 256C144 269.3 154.7 280 168 280H232V344C232 357.3 242.7 368 256 368z"/></svg>
                <svg id="btn_minus" style="display: none;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM168 232C154.7 232 144 242.7 144 256C144 269.3 154.7 280 168 280H344C357.3 280 368 269.3 368 256C368 242.7 357.3 232 344 232H168z"/></svg>
            </button>
            <div id="subinfo" style="display:none;transition: 0.5s;">
                <ul>
                    <li> <b>platform</b>: Linux4.15.0-139-generic-x86_64 </li>
                    <li> <b>processor</b>: Intel(R) Xeon(R) Gold 6140 CPU @ 2.30GHz </li>
                    <li> <b>nb threads</b>: 1 </li>
                    
                    <li> <b>numpy</b>: 1.18.5 blas=openblas lapack=openblas </li>
                    
                    <li> <b>scipy</b>: 1.5.2 </li>
                </ul>
            </div>
        </p>


        <!-- Add selector to display only one plot -->
        <div>
            <label for='dataset_selector'>Dataset:</label>
            <select id='dataset_selector' onchange="setState({dataset: this.value});">
                <option value="Boston[standardized=True]">Boston[standardized=True]</option>
                <option value="Simulated[n_samples=100,n_features=500]">Simulated[n_samples=100,n_features=500]</option>
                <option value="Simulated[n_samples=100,n_features=1000]">Simulated[n_samples=100,n_features=1000]</option>
            </select>
        </div>
        <div>
            <label for='objective_selector'>Objective:</label>
            <select id='objective_selector' onchange="setState({objective: this.value});">
                <option value="Non Negative Least Squares[fit_intercept=False]">Non Negative Least Squares[fit_intercept=False]</option>
            </select>
            <select id='objective_column' onchange="setState({objective_column: this.value});">
                <option value="objective_value">value</option>
            </select>
        </div>
        <div>
            <label for='plot_kind'>Chart type:</label>
            <select id='plot_kind' onchange="setState({plot_kind: this.value});">
                <option value="objective_curve">objective curve</option>
                <option value="suboptimality_curve">suboptimality curve</option>
                <option value="relative_suboptimality_curve">relative suboptimality curve</option>
                <option value="bar_chart">bar chart</option>
            </select>
            <select id="change_scaling" onchange="setState({scale: this.value});">
                <option value="semilog-y">semilog-y</option>
                <option value="semilog-x">semilog-x</option>
                <option value="loglog">loglog</option>
                <option value="linear">linear</option>
            </select>
        </div>
        <div style="display: flex; align-items: center;">
            <p style="margin: 0; margin-right: 4px">Quantiles: </p>
            <label for='change_shades' class="switch">
                <input id="change_shades" type="checkbox" checked onchange="setState({with_quantiles: this.checked})">
                <span class="slider round"></span>
            </label>
        </div>

        <div id="unique_plot"></div>

        <div id="legend_title">
            Solvers <span id="legend_help">(Click on a solver to hide it or double click to hide all the others)</span>
        </div>
        <div id="plot_legend" class="space-r-4"></div>

        <script src="https://cdn.plot.ly/plotly-2.12.1.min.js"></script>
        <script>
            window.data = {"Boston[standardized=True]": {"Non Negative Least Squares[fit_intercept=False]": {"objective_value": {"solvers": {"cd": {"scatter": {"x": [0.0002286732196807, 0.0002434812486171, 0.0002374406903982, 0.0002611838281154, 0.000271089375019, 0.0002630818635225, 0.0003027636557817, 0.0002956967800855, 0.0003804545849561], "y": [149813.17, 138673.02087068328, 137637.56356834833, 137624.9261931137, 137624.82437588455, 137624.82382556563, 137624.8238255646, 137624.82382556467, 137624.82382556464], "q1": [0.0001464948058128, 0.00021996423602098, 0.0001996766775846, 0.00021463967859736, 0.00022415407001964, 0.00023109279572962, 0.00026226826012126, 0.0002471625804901, 0.00032703056931492], "q9": [0.00094822570681564, 0.0002717465162277, 0.00025606155395505996, 0.00027187727391716, 0.00027460344135756, 0.0002823762595653, 0.00032643862068646, 0.0003481548279523, 0.00040210671722886]}, "bar": {"y": 0.0002630818635225, "times": [0.0002171117812395, 0.0002630818635225, 0.0002520643174648, 0.0002842731773853, 0.0002795308828353], "text": ""}, "color": "rgba(247.0, 182.0, 210.0, 1.0)", "marker": 14}, "PGD[use_acceleration=False]": {"scatter": {"x": [0.000474015250802, 0.0005207918584346, 0.0005518291145563, 0.0005793292075395, 0.000605970621109, 0.0006533414125442, 0.0007148664444684, 0.0007927026599645, 0.0009048320353031, 0.001067716628313, 0.0013155601918697, 0.0016835611313581, 0.0022221021354198, 0.0030358601361513, 0.0042668133974075, 0.0060727503150701], "y": [149813.17, 144867.6530342135, 142141.1361488192, 140564.28469744997, 139606.8940545692, 138596.87357413786, 137995.20645874407, 137732.99962885218, 137638.37585548437, 137626.18129182272, 137624.87940278073, 137624.82430590532, 137624.82382599916, 137624.82382556458, 137624.8238255646, 137624.82382556467], "q1": [0.00046564899384972, 0.00050771683454508, 0.00054503679275506, 0.0005720213055610399, 0.00059893541038028, 0.00064463838934894, 0.00070774219930164, 0.0007862266153096801, 0.0008983217179774401, 0.0010616898536681399, 0.0013114541769027, 0.0016804348677396, 0.0022156327962875, 0.00302244089543814, 0.00422275513410566, 0.006018079817295], "q9": [0.0007820632308720801, 0.0008537806570529601, 0.00089659355580802, 0.0009371642023324801, 0.00097697339951984, 0.0010558616369962, 0.00114478282630438, 0.00125691629946224, 0.00136960670351974, 0.0015336979180574, 0.0017823394387959802, 0.00215351432561868, 0.0026945669203996, 0.00351668931543818, 0.00473483465611932, 0.0065405938774346405]}, "bar": {"y": 0.0022221021354198, "times": [0.0030033197253942, 0.0022314377129077, 0.0022218488156795, 0.0022221021354198, 0.0022114887833595], "text": ""}, "color": "rgba(127.0, 127.0, 127.0, 1.0)", "marker": 15}, "PGD[use_acceleration=True]": {"scatter": {"x": [0.0004603769630193, 0.0005276910960674, 0.0005780160427093, 0.0006210450083017, 0.0006630569696426, 0.0007351599633693, 0.000833423808217, 0.000958114862442, 0.0011452957987785, 0.0014064647257328, 0.0018113479018211, 0.0024058390408754, 0.0032763108611106, 0.0046063102781772, 0.0065630320459604, 0.0094806123524904], "y": [149813.17, 144867.6530342135, 142141.1361488192, 140193.81814223106, 138978.47831495744, 137916.38194850297, 137632.82288364947, 137632.65987880656, 137625.07976950362, 137624.83827771727, 137624.83327674022, 137624.8240660365, 137624.82382573135, 137624.823825565, 137624.82382556458, 137624.82382556467], "q1": [0.00044547058641908, 0.0005149111151694601, 0.0005641423165798, 0.0006072394549846, 0.00065075345337388, 0.0007218655198812, 0.00081876777112478, 0.0009437453001737401, 0.00112474597990512, 0.00138565227389332, 0.00180540941655632, 0.002397371456027, 0.0032629214227199, 0.00457676164805886, 0.00653099603950974, 0.00944803729653354], "q9": [0.00046787112951272, 0.00053607150912278, 0.00058516338467594, 0.00062878616154192, 0.00067328065633772, 0.0007460065186023, 0.0008442841470241, 0.00096903331577776, 0.00114948935806746, 0.00141045562922954, 0.00182179063558576, 0.00242034383118148, 0.00329395905137058, 0.00461319349706168, 0.00656576007604596, 0.009505445137619941]}, "bar": {"y": 0.0032763108611106, "times": [0.0032956376671791, 0.0032914411276578, 0.0032580159604549, 0.0032763108611106, 0.0032702796161174], "text": ""}, "color": "rgba(199.0, 199.0, 199.0, 1.0)", "marker": 16}, "scipy": {"scatter": {"x": [0.0005327705293893, 0.0005075838416814, 0.0004787091165781, 0.0005804989486932], "y": [137624.82382556464, 139485.9618905969, 138188.86292213816, 137897.49629761648], "q1": [0.0005242545157670601, 0.0005054488778114, 0.0004702351987361, 0.00050950720906256], "q9": [0.0007252003997564, 0.00067030563950534, 0.00066681876778598, 0.0007075775414705]}, "bar": {"y": 0.0005327705293893, "times": [0.0008470583707094, 0.0005305968225002, 0.0005200263112783, 0.0005327705293893, 0.0005424134433269], "text": ""}, "color": "rgba(188.0, 189.0, 34.0, 1.0)", "marker": 17}, "sklearn": {"scatter": {"x": [0.0016944278031587, 0.0017626173794269, 0.0018174778670072, 0.0018671751022338, 0.0018781665712594, 0.0018072314560413, 0.0018453001976013, 0.0018833205103874, 0.0019118525087833], "y": [149813.17, 138673.02087055353, 137637.5635683369, 137624.92619311277, 137624.82437588443, 137624.8238255657, 137624.82382556458, 137624.82382556467, 137624.82382556467], "q1": [0.00148023441433904, 0.0016370840370654599, 0.0016112938523291799, 0.0015647608786820801, 0.0016213428229093, 0.0015427593141794, 0.00159803591668598, 0.00155056044459338, 0.0016460679471492002], "q9": [0.0030693162232637, 0.0018828082829713, 0.0018721695989369598, 0.00190030895173548, 0.00192992314696308, 0.0019409347325563, 0.00193498320877546, 0.00198976285755632, 0.00256755203008644]}, "bar": {"y": 0.0018072314560413, "times": [0.0014620553702116, 0.0019084364175796, 0.0016638152301311, 0.0018072314560413, 0.0019626002758741], "text": ""}, "color": "rgba(219.0, 219.0, 141.0, 1.0)", "marker": 18}}, "transformers": {"c_star": 137624.8238255645, "max_f_0": 144867.6530342135}}}}, "Simulated[n_samples=100,n_features=500]": {"Non Negative Least Squares[fit_intercept=False]": {"objective_value": {"solvers": {"cd": {"scatter": {"x": [0.000516278669238, 0.0007036253809928, 0.0008843690156936, 0.0008037816733121, 0.0011906046420335, 0.0016795322299003, 0.0022792667150497, 0.0030848998576402, 0.0042881108820438, 0.0060725547373294, 0.0084712915122509, 0.0103498119860887, 0.0123225916177034, 0.0138162281364202, 0.0176346050575375, 0.0185855831950902], "y": [64.11124089355452, 3.2311518731403304, 0.2478353963968162, 0.0355509239452887, 0.0050696155213966, 9.69387199047146e-05, 2.5042836472344e-07, 8.818776567732514e-11, 5.748585919760504e-16, 9.464625093770738e-24, 2.30601887691206e-29, 2.5223200689661906e-29, 2.5223200689661906e-29, 1.9789478241064979e-29, 2.5223200689661906e-29, 1.9789478241064979e-29], "q1": [0.00036101303994650003, 0.00058126933872694, 0.00076639465987676, 0.00079464353621004, 0.00114639252424236, 0.0014836095273494, 0.00203629247844214, 0.00284508094191548, 0.00426806434988972, 0.00579993911087512, 0.0077634993940591595, 0.0101702336221933, 0.01188510507345194, 0.0138162281364202, 0.01737358495593069, 0.0185855831950902], "q9": [0.0005398500710724999, 0.0007336031645536201, 0.00090696774423114, 0.0009598713368177, 0.0012981034815310799, 0.00168330967426294, 0.00231176577508448, 0.00320349000394336, 0.00450829379260536, 0.00629018768668174, 0.00851397812366482, 0.0107272740453481, 0.01402376443147654, 0.0138162281364202, 0.01803234573453662, 0.0185855831950902]}, "bar": {"y": 0.0022792667150497, "times": [0.0023126285523176, 0.0018743630498647, 0.0022792667150497, 0.0022791866213083, 0.0023104716092348], "text": ""}, "color": "rgba(247.0, 182.0, 210.0, 1.0)", "marker": 14}, "PGD[use_acceleration=False]": {"scatter": {"x": [0.0038826540112495, 0.0039509776979684, 0.0040062386542558, 0.0040567796677351, 0.0041063856333494, 0.0042006447911262, 0.0043336953967809, 0.00450792722404, 0.0047642644494771, 0.0051399320363998, 0.0057232566177845, 0.00658312253654, 0.0078602787107229, 0.0097840577363967, 0.0126394163817167, 0.0169044807553291, 0.0233375206589698, 0.0331350807100534, 0.0477228723466396, 0.0696748793125152, 0.1037492603063583, 0.1523380205035209, 0.2248521037399768], "y": [64.11124089355452, 36.5176392240345, 23.25801492351267, 15.861490054716043, 11.330071110729032, 6.36525749885292, 3.1559207086544485, 1.4855531893867675, 0.5817497925342004, 0.1774365340281232, 0.0322360082198992, 0.0027757603149816, 7.791298215761279e-05, 3.5023355843160577e-07, 1.1228109395165575e-10, 6.451526725131576e-16, 8.391032117940194e-24, 1.5236697590047729e-30, 5.891604017394763e-31, 5.316232446509077e-31, 8.397720357528654e-31, 8.820461980321652e-31, 8.719832140727421e-31], "q1": [0.00385686121881002, 0.00392661392688744, 0.0039809722453355, 0.00403108149766914, 0.00408120602369306, 0.0041738506406545205, 0.00430608280003066, 0.00447934344410892, 0.00474182181060306, 0.00511620044708244, 0.00569799728691572, 0.0065565880388021, 0.0078168589621782, 0.009733793511986721, 0.01257421225309368, 0.01682939678430554, 0.023242658749222718, 0.0329751171171665, 0.0475029610097408, 0.06929263882338998, 0.10235620029270642, 0.15096060149371618, 0.22380310185253616], "q9": [0.00462691932916632, 0.00471909232437606, 0.00478965379297724, 0.00485597774386404, 0.00491915717720982, 0.00503899753093714, 0.00521095469594, 0.00543510913848872, 0.00576357431709766, 0.006264089420437741, 0.0070125319063663, 0.00812661908566944, 0.00977159440517422, 0.01220980063080784, 0.01581038273870942, 0.02116078101098534, 0.02904045693576332, 0.04102678149938582, 0.058372508734464576, 0.08292437382042404, 0.11949899867177004, 0.17095383740961548, 0.24387766271829597]}, "bar": {"y": 0.0097840577363967, "times": [0.013825099915266, 0.0097840577363967, 0.0097868517041206, 0.0097124259918928, 0.0097658447921276], "text": ""}, "color": "rgba(127.0, 127.0, 127.0, 1.0)", "marker": 15}, "PGD[use_acceleration=True]": {"scatter": {"x": [0.0038417633622884, 0.0039312485605478, 0.0040135905146598, 0.0040807388722896, 0.0041469987481832, 0.0042660366743803, 0.0044432338327169, 0.0046690553426742, 0.0049895327538251, 0.0054643079638481, 0.0061950571835041, 0.007287023589015, 0.0088980644941329, 0.0113537516444921, 0.0149907059967517, 0.0204246081411838, 0.0286400038748979, 0.0409486182034015, 0.0593775808811187, 0.0869183223694562, 0.1283683814108371], "y": [64.11124089355452, 36.5176392240345, 23.25801492351267, 14.128115774928364, 8.312404206330585, 2.7766495597329244, 0.5060999252230702, 0.0237265416229158, 0.0033633841777623, 0.0001608453233027, 6.2947492203601375e-06, 2.1657292384011767e-08, 4.1824134032602186e-11, 5.860184534133009e-15, 1.2548647568348543e-20, 1.1081504224037915e-28, 6.213886952571008e-30, 5.8645232606591644e-30, 8.697181022863909e-30, 8.046794480644339e-30, 6.161694251078114e-30], "q1": [0.0038292992860078203, 0.00392111912369726, 0.00399429909884924, 0.00406216792762272, 0.00412723384797572, 0.00424844250082968, 0.00442256480455394, 0.00464693009853358, 0.00496838055551046, 0.00544691570103164, 0.00617661811411378, 0.00727717615664002, 0.00888479016721244, 0.01131647936999794, 0.01494134701788422, 0.02037493214011192, 0.0285607181489467, 0.04080610573291774, 0.05918935164809224, 0.08683285452425475, 0.12824081294238565], "q9": [0.0038912665098905, 0.00398107543587682, 0.00405183993279928, 0.00411866493523116, 0.00418591462075706, 0.00430671311914918, 0.00448063910007472, 0.0047032788395881, 0.0050266180187463, 0.00550966858863826, 0.00624518692493434, 0.00734147951006884, 0.00895623788237566, 0.01139396540820596, 0.0150356341153383, 0.02049812376499176, 0.02872520126402374, 0.042157999798655484, 0.06302255168557164, 0.09076148234307764, 0.1322172965854406]}, "bar": {"y": 0.007287023589015, "times": [0.0072711687535047, 0.007287023589015, 0.007286187261343, 0.0073579773306846, 0.0073167327791452], "text": ""}, "color": "rgba(199.0, 199.0, 199.0, 1.0)", "marker": 16}, "scipy": {"scatter": {"x": [0.0132387913763523, 0.0012413896620273, 0.0015367567539215, 0.0018145609647035], "y": [6.249822661231577e-29, 58.508939264469575, 54.76144089257267, 50.90190047148462], "q1": [0.01119211986660954, 0.00123466514050954, 0.00145281217992302, 0.00178810358047478], "q9": [0.01534101553261276, 0.00150635987520216, 0.0018433447927236, 0.00221827365458006]}, "bar": {"y": 0.0132387913763523, "times": [0.0156888011842966, 0.0132387913763523, 0.0116778668016195, 0.014819337055087, 0.0108682885766029], "text": ""}, "color": "rgba(188.0, 189.0, 34.0, 1.0)", "marker": 17}, "sklearn": {"scatter": {"x": [0.0024245735257864, 0.0023696795105934, 0.002469278872013, 0.0028370544314384, 0.0028866324573755, 0.0032142978161573, 0.0032134391367435, 0.0038339849561452, 0.0046951957046985, 0.0061683133244514, 0.0074780210852622, 0.0086045991629362, 0.0115408655256032, 0.0151686500757932, 0.0195295820012688, 0.026752431876957347, 0.03822640702128405, 0.0593994949012994, 0.07812578976154319, 0.12700738199055195, 0.1679439730942249, 0.26098831649869675, 0.34771044831722975, 0.5282858861610293], "y": [64.11124089355452, 3.2311518737320752, 0.2478353985235702, 0.0355509249506383, 0.0050696159864402, 9.693878203062842e-05, 2.504311505203458e-07, 8.823810358413689e-11, 7.688462247000101e-16, 6.457223565571908e-17, 6.45604503715894e-17, 6.456043866033483e-17, 6.456043368764925e-17, 6.456043272188249e-17, 6.45604275195331e-17, 6.456042822056063e-17, 6.45604130291653e-17, 6.456040232535111e-17, 6.456039717994642e-17, 6.456038816234651e-17, 6.456035842701056e-17, 6.456038593292082e-17, 6.456040735231232e-17, 6.826238489321805e-17], "q1": [0.0018591750413179, 0.00191421881318088, 0.0020999446511268, 0.00238896198570722, 0.00241869390010826, 0.00267804153263562, 0.0029161866754293, 0.00338395535945888, 0.0029786076396703, 0.0051153749227523405, 0.00608496889472004, 0.00781997889280314, 0.01033459790050978, 0.0138992976397275, 0.01798558756709091, 0.02595430128276343, 0.036734928376972655, 0.05793561711907379, 0.07749513369053596, 0.1266558308154344, 0.15005347132682798, 0.2558072024956345, 0.3255937691777945, 0.5178973462432623], "q9": [0.033978426828980425, 0.00259840600192542, 0.0026847463101148, 0.0028796564787626003, 0.00294065922498696, 0.00325331836938854, 0.00352095589041708, 0.004169617593288401, 0.00470445565879342, 0.00621283240616318, 0.0076004441827535, 0.01061584167182438, 0.01295268051326268, 0.015907360240817, 0.0229376565665006, 0.02763938605785368, 0.03927474431693551, 0.062160558998584685, 0.07877760995179406, 0.12875230591744183, 0.17024750001728534, 0.2640985060483217, 0.3531330874189734, 0.5486517345532775]}, "bar": {"y": 0.0032134391367435, "times": [0.0028572883456945, 0.0032134391367435, 0.0030045341700315, 0.0035455785691738, 0.003484021872282], "text": ""}, "color": "rgba(219.0, 219.0, 141.0, 1.0)", "marker": 18}}, "transformers": {"c_star": -1e-10, "max_f_0": 58.508939264469575}}}}, "Simulated[n_samples=100,n_features=1000]": {"Non Negative Least Squares[fit_intercept=False]": {"objective_value": {"solvers": {"cd": {"scatter": {"x": [0.0008604153990745, 0.0012636575847864, 0.0013315808027982, 0.0018260404467582, 0.0023161638528108, 0.0032455082982778, 0.0044812206178903, 0.0056986436247825, 0.0075886361300945, 0.0096873957663774, 0.0129868648946285, 0.019834067672491], "y": [54.1060333062522, 0.2230588317176619, 0.0004044749143927, 8.308914662585468e-07, 1.5076805924769171e-09, 5.848002885865003e-15, 3.467129104662286e-23, 3.021716223805689e-29, 3.009216938466616e-29, 3.009216938466616e-29, 3.009216938466616e-29, 3.009216938466616e-29], "q1": [0.00042811967432494, 0.0007887266576289201, 0.00114096887409682, 0.0015579074621200001, 0.00214912146329874, 0.0029366303235292203, 0.00353608205914492, 0.00557410717010494, 0.0071140978485345, 0.00901218429207796, 0.0106248535215854, 0.017950759455561578], "q9": [0.00087121389806268, 0.00136410333216184, 0.00154236629605286, 0.00206217430531972, 0.00245543010532848, 0.00330642014741894, 0.0046702977269887395, 0.0061826519668101996, 0.0077015496790409, 0.011062264442443799, 0.01462814100086684, 0.021750292554497678]}, "bar": {"y": 0.0018260404467582, "times": [0.0018260404467582, 0.0020797792822122, 0.0014450065791606, 0.0017272587865591, 0.002035766839981], "text": ""}, "color": "rgba(247.0, 182.0, 210.0, 1.0)", "marker": 14}, "PGD[use_acceleration=False]": {"scatter": {"x": [0.0074055138975381, 0.0075078848749399, 0.0075922645628452, 0.0076801218092441, 0.0077611822634935, 0.0079144593328237, 0.008140955120325, 0.0084341801702976, 0.0088675059378147, 0.0095035675913095, 0.0104836262762546, 0.011956337839365, 0.0141159947961568, 0.0173948034644126, 0.0222154967486858, 0.0295605976134538, 0.04040521197021, 0.0565382614731788, 0.0812227558344602], "y": [54.1060333062522, 28.124398435625487, 16.103429252299268, 9.851232701286824, 6.314499700701645, 2.864126004196277, 1.012097725628943, 0.2896391630168168, 0.0500916932696306, 0.0039441290442366, 8.194181094394395e-05, 2.5915647589688377e-07, 5.421870593606891e-11, 1.4420801880105911e-16, 7.170062969304302e-25, 3.991444670759475e-31, 5.533151591241457e-31, 8.690232252578233e-31, 6.66126505616628e-31], "q1": [0.00720853246748446, 0.0073095250874757, 0.00739330761134616, 0.00747325085103504, 0.00755231343209738, 0.00770356617867938, 0.007924456894397679, 0.00821311622858042, 0.00863931439816946, 0.009272554144263239, 0.01024639047682282, 0.0116893272846937, 0.01382361762225622, 0.01705996021628376, 0.02185748629271978, 0.02916476018726822, 0.040020769461989396, 0.05623381063342088, 0.08046640865504735], "q9": [0.0101048689335584, 0.010249275341629921, 0.01036785952746864, 0.010489130392670581, 0.0106005437672138, 0.0108155325055122, 0.0111260589212179, 0.011539568006992261, 0.01213912852108472, 0.013029631227254802, 0.0143908414989709, 0.01644278019666668, 0.01940451338887214, 0.02381067946553226, 0.0302958600223064, 0.03995976261794562, 0.0539915189146995, 0.0742893125861883, 0.10264230035245413]}, "bar": {"y": 0.011956337839365, "times": [0.0179583802819252, 0.0141693800687789, 0.011956337839365, 0.0116883534938097, 0.0116907879710197], "text": ""}, "color": "rgba(127.0, 127.0, 127.0, 1.0)", "marker": 15}, "PGD[use_acceleration=True]": {"scatter": {"x": [0.0073515512049198, 0.0074833929538726, 0.0075890738517045, 0.0076931733638048, 0.0077936332672834, 0.0079834796488285, 0.0082587916404008, 0.0086050368845462, 0.0091159846633672, 0.0098748486489057, 0.0110614020377397, 0.012900611385703, 0.0154060758650302, 0.0192220173776149, 0.0248932670801877, 0.0333700645714998, 0.0461250077933073, 0.0652404446154832, 0.0939144194126129, 0.1370395421981811], "y": [54.1060333062522, 28.124398435625487, 16.103429252299268, 8.425451885121308, 4.067946321587288, 0.7179710778229099, 0.0089755984263685, 0.0014952146177957, 2.636900725489898e-05, 7.23719195084051e-07, 4.3224789453085207e-10, 5.317549163727754e-12, 4.6748992930885455e-15, 1.869006369372161e-23, 4.991091085229824e-30, 4.514134534502325e-30, 4.503445623310976e-30, 5.952033830981836e-30, 5.5064699383478486e-30, 5.0979801971433165e-30], "q1": [0.0072155229747295204, 0.00734095461666582, 0.00744435898959632, 0.00754374004900452, 0.00764139518141744, 0.00783218108117574, 0.00809719376265996, 0.00843193046748634, 0.00892575010657306, 0.00966198854148384, 0.01080094650387758, 0.01251421980559824, 0.01502286940813062, 0.01883523724973198, 0.0245265051722526, 0.03304163478314872, 0.04582844749093052, 0.06496108844876287, 0.09365462101995944, 0.13668540753424166], "q9": [0.00794816389679906, 0.0080898869782686, 0.00820560567080968, 0.00831408575177186, 0.00842287726700304, 0.00862558931112282, 0.00891849361360068, 0.0092879340052604, 0.00981624647974964, 0.010562870278954459, 0.011719001829624119, 0.01347174309194084, 0.015985543653368878, 0.01979576237499708, 0.02547636255621906, 0.03398010879755014, 0.046755120530724496, 0.06592853069305414, 0.09467855729162687, 0.13816374018788335]}, "bar": {"y": 0.0098748486489057, "times": [0.0109667312353849, 0.0098748486489057, 0.0096676927059888, 0.0099570788443088, 0.0096581857651472], "text": ""}, "color": "rgba(199.0, 199.0, 199.0, 1.0)", "marker": 16}, "scipy": {"scatter": {"x": [0.0213499087840318, 0.0021558068692684, 0.0027099512517452, 0.0032045375555753], "y": [8.120408714101873e-29, 49.1075513046256, 44.35961003112995, 40.6773423368761], "q1": [0.020793415978550882, 0.0019772801548242, 0.002681453898549, 0.00286212190985672], "q9": [0.02348404191434378, 0.00251754894852634, 0.0032392222434282003, 0.0039555501192808]}, "bar": {"y": 0.0213499087840318, "times": [0.0248837154358625, 0.0205352250486612, 0.0211807023733854, 0.0213499087840318, 0.0213845316320657], "text": ""}, "color": "rgba(188.0, 189.0, 34.0, 1.0)", "marker": 17}, "sklearn": {"scatter": {"x": [0.003395577892661, 0.0036688279360532, 0.0035294704139232, 0.0036935061216354, 0.0041695889085531, 0.004170911386609, 0.0051266327500343, 0.0061533171683549, 0.0079470723867416, 0.0098550952970981, 0.0126827135682106, 0.0159832630306482, 0.0193609148263931], "y": [54.1060333062522, 0.2230588309632525, 0.0004044749075114, 8.308910444488294e-07, 1.5076715145374562e-09, 5.901505419891652e-15, 4.946688722639e-17, 4.946017263683404e-17, 4.9404765413092064e-17, 4.935538726224363e-17, 4.9369884464511404e-17, 4.9404672064886125e-17, 4.9404708218712406e-17], "q1": [0.0027351640164852, 0.00281260237097732, 0.0027729239314793802, 0.00312150903046128, 0.0032954946160316002, 0.00323960371315474, 0.00465197041630738, 0.0053536102175712, 0.00626764521002762, 0.00797739475965494, 0.01162508875131604, 0.01439366750419136, 0.01770163439214228], "q9": [0.00420980416238302, 0.00377210006117812, 0.00400339737534522, 0.00407236069440838, 0.00509182177484034, 0.0048580825328826795, 0.0056465212255715795, 0.0069120973348617, 0.0082005660980939, 0.01089696958661074, 0.013915937021374641, 0.016817515715956622, 0.02113703116774552]}, "bar": {"y": 0.0036935061216354, "times": [0.0029977429658174, 0.0041762515902519, 0.0036935061216354, 0.0033071581274271, 0.0039165243506431], "text": ""}, "color": "rgba(219.0, 219.0, 141.0, 1.0)", "marker": 18}}, "transformers": {"c_star": -1e-10, "max_f_0": 49.1075513046256}}}}};

            window.addEventListener("load", () => {
                // Initialize plot state
                setState({
                    'dataset': document.getElementById('dataset_selector').value,
                    'objective': document.getElementById('objective_selector').value,
                    'objective_column': document.getElementById('objective_column').value,
                    'plot_kind': document.getElementById('plot_kind').value,
                    'scale': document.getElementById('change_scaling').value,
                    'with_quantiles': document.getElementById('change_shades').checked,
                    'hidden_solvers': []
                });
            });
        </script>
        <script type="text/javascript">
            /**
 * Round with precision control
 * https://github.com/plotly/d3/blob/6bb40cd42f6479be84efda3e50c8444b50d5905d/d3.js#L2189
 */
const d3round = (x, n) => {
    return n ? Math.round(x * (n = Math.pow(10, n))) / n : Math.round(x);
};

/**
 * Container of function that create path for SVG plot marker
 * https://github.com/plotly/plotly.js/blob/b2df3710d7877ff5b4f85256015a88c8ea8fbe1d/src/components/drawing/symbol_defs.js#L13
 */
const SYMBOLDEFS = {
    circle: {
        n: 0,
        f: r => {
            var rs = d3round(r, 2);
            return 'M' + rs + ',0A' + rs + ',' + rs + ' 0 1,1 0,-' + rs +
                'A' + rs + ',' + rs + ' 0 0,1 ' + rs + ',0Z';
        }
    },
    square: {
        n: 1,
        f: r => {
            var rs = d3round(r, 2);
            return 'M' + rs + ',' + rs + 'H-' + rs + 'V-' + rs + 'H' + rs + 'Z';
        }
    },
    diamond: {
        n: 2,
        f: r => {
            var rd = d3round(r * 1.3, 2);
            return 'M' + rd + ',0L0,' + rd + 'L-' + rd + ',0L0,-' + rd + 'Z';
        }
    },
    cross: {
        n: 3,
        f: r => {
            var rc = d3round(r * 0.4, 2);
            var rc2 = d3round(r * 1.2, 2);
            return 'M' + rc2 + ',' + rc + 'H' + rc + 'V' + rc2 + 'H-' + rc +
                'V' + rc + 'H-' + rc2 + 'V-' + rc + 'H-' + rc + 'V-' + rc2 +
                'H' + rc + 'V-' + rc + 'H' + rc2 + 'Z';
        }
    },
    x: {
        n: 4,
        f: r => {
            var rx = d3round(r * 0.8 / Math.sqrt(2), 2);
            var ne = 'l' + rx + ',' + rx;
            var se = 'l' + rx + ',-' + rx;
            var sw = 'l-' + rx + ',-' + rx;
            var nw = 'l-' + rx + ',' + rx;
            return 'M0,' + rx + ne + se + sw + se + sw + nw + sw + nw + ne + nw + ne + 'Z';
        }
    },
    'triangle-up': {
        n: 5,
        f: r => {
            var rt = d3round(r * 2 / Math.sqrt(3), 2);
            var r2 = d3round(r / 2, 2);
            var rs = d3round(r, 2);
            return 'M-' + rt + ',' + r2 + 'H' + rt + 'L0,-' + rs + 'Z';
        }
    },
    'triangle-down': {
        n: 6,
        f: r => {
            var rt = d3round(r * 2 / Math.sqrt(3), 2);
            var r2 = d3round(r / 2, 2);
            var rs = d3round(r, 2);
            return 'M-' + rt + ',-' + r2 + 'H' + rt + 'L0,' + rs + 'Z';
        }
    },
    'triangle-left': {
        n: 7,
        f: r => {
            var rt = d3round(r * 2 / Math.sqrt(3), 2);
            var r2 = d3round(r / 2, 2);
            var rs = d3round(r, 2);
            return 'M' + r2 + ',-' + rt + 'V' + rt + 'L-' + rs + ',0Z';
        }
    },
    'triangle-right': {
        n: 8,
        f: r => {
            var rt = d3round(r * 2 / Math.sqrt(3), 2);
            var r2 = d3round(r / 2, 2);
            var rs = d3round(r, 2);
            return 'M-' + r2 + ',-' + rt + 'V' + rt + 'L' + rs + ',0Z';
        }
    },
    'triangle-ne': {
        n: 9,
        f: r => {
            var r1 = d3round(r * 0.6, 2);
            var r2 = d3round(r * 1.2, 2);
            return 'M-' + r2 + ',-' + r1 + 'H' + r1 + 'V' + r2 + 'Z';
        }
    },
    'triangle-se': {
        n: 10,
        f: r => {
            var r1 = d3round(r * 0.6, 2);
            var r2 = d3round(r * 1.2, 2);
            return 'M' + r1 + ',-' + r2 + 'V' + r1 + 'H-' + r2 + 'Z';
        }
    },
    'triangle-sw': {
        n: 11,
        f: r => {
            var r1 = d3round(r * 0.6, 2);
            var r2 = d3round(r * 1.2, 2);
            return 'M' + r2 + ',' + r1 + 'H-' + r1 + 'V-' + r2 + 'Z';
        }
    },
    'triangle-nw': {
        n: 12,
        f: r => {
            var r1 = d3round(r * 0.6, 2);
            var r2 = d3round(r * 1.2, 2);
            return 'M-' + r1 + ',' + r2 + 'V-' + r1 + 'H' + r2 + 'Z';
        }
    },
    pentagon: {
        n: 13,
        f: r => {
            var x1 = d3round(r * 0.951, 2);
            var x2 = d3round(r * 0.588, 2);
            var y0 = d3round(-r, 2);
            var y1 = d3round(r * -0.309, 2);
            var y2 = d3round(r * 0.809, 2);
            return 'M' + x1 + ',' + y1 + 'L' + x2 + ',' + y2 + 'H-' + x2 +
                'L-' + x1 + ',' + y1 + 'L0,' + y0 + 'Z';
        }
    },
    hexagon: {
        n: 14,
        f: r => {
            var y0 = d3round(r, 2);
            var y1 = d3round(r / 2, 2);
            var x = d3round(r * Math.sqrt(3) / 2, 2);
            return 'M' + x + ',-' + y1 + 'V' + y1 + 'L0,' + y0 +
                'L-' + x + ',' + y1 + 'V-' + y1 + 'L0,-' + y0 + 'Z';
        }
    },
    hexagon2: {
        n: 15,
        f: r => {
            var x0 = d3round(r, 2);
            var x1 = d3round(r / 2, 2);
            var y = d3round(r * Math.sqrt(3) / 2, 2);
            return 'M-' + x1 + ',' + y + 'H' + x1 + 'L' + x0 +
                ',0L' + x1 + ',-' + y + 'H-' + x1 + 'L-' + x0 + ',0Z';
        }
    },
    octagon: {
        n: 16,
        f: r => {
            var a = d3round(r * 0.924, 2);
            var b = d3round(r * 0.383, 2);
            return 'M-' + b + ',-' + a + 'H' + b + 'L' + a + ',-' + b + 'V' + b +
                'L' + b + ',' + a + 'H-' + b + 'L-' + a + ',' + b + 'V-' + b + 'Z';
        }
    },
    star: {
        n: 17,
        f: r => {
            var rs = r * 1.4;
            var x1 = d3round(rs * 0.225, 2);
            var x2 = d3round(rs * 0.951, 2);
            var x3 = d3round(rs * 0.363, 2);
            var x4 = d3round(rs * 0.588, 2);
            var y0 = d3round(-rs, 2);
            var y1 = d3round(rs * -0.309, 2);
            var y3 = d3round(rs * 0.118, 2);
            var y4 = d3round(rs * 0.809, 2);
            var y5 = d3round(rs * 0.382, 2);
            return 'M' + x1 + ',' + y1 + 'H' + x2 + 'L' + x3 + ',' + y3 +
                'L' + x4 + ',' + y4 + 'L0,' + y5 + 'L-' + x4 + ',' + y4 +
                'L-' + x3 + ',' + y3 + 'L-' + x2 + ',' + y1 + 'H-' + x1 +
                'L0,' + y0 + 'Z';
        }
    },
    hexagram: {
        n: 18,
        f: r => {
            var y = d3round(r * 0.66, 2);
            var x1 = d3round(r * 0.38, 2);
            var x2 = d3round(r * 0.76, 2);
            return 'M-' + x2 + ',0l-' + x1 + ',-' + y + 'h' + x2 +
                'l' + x1 + ',-' + y + 'l' + x1 + ',' + y + 'h' + x2 +
                'l-' + x1 + ',' + y + 'l' + x1 + ',' + y + 'h-' + x2 +
                'l-' + x1 + ',' + y + 'l-' + x1 + ',-' + y + 'h-' + x2 + 'Z';
        }
    },
    'star-triangle-up': {
        n: 19,
        f: r => {
            var x = d3round(r * Math.sqrt(3) * 0.8, 2);
            var y1 = d3round(r * 0.8, 2);
            var y2 = d3round(r * 1.6, 2);
            var rc = d3round(r * 4, 2);
            var aPart = 'A ' + rc + ',' + rc + ' 0 0 1 ';
            return 'M-' + x + ',' + y1 + aPart + x + ',' + y1 +
                aPart + '0,-' + y2 + aPart + '-' + x + ',' + y1 + 'Z';
        }
    },
    'star-triangle-down': {
        n: 20,
        f: r => {
            var x = d3round(r * Math.sqrt(3) * 0.8, 2);
            var y1 = d3round(r * 0.8, 2);
            var y2 = d3round(r * 1.6, 2);
            var rc = d3round(r * 4, 2);
            var aPart = 'A ' + rc + ',' + rc + ' 0 0 1 ';
            return 'M' + x + ',-' + y1 + aPart + '-' + x + ',-' + y1 +
                aPart + '0,' + y2 + aPart + x + ',-' + y1 + 'Z';
        }
    },
    'star-square': {
        n: 21,
        f: r => {
            var rp = d3round(r * 1.1, 2);
            var rc = d3round(r * 2, 2);
            var aPart = 'A ' + rc + ',' + rc + ' 0 0 1 ';
            return 'M-' + rp + ',-' + rp + aPart + '-' + rp + ',' + rp +
                aPart + rp + ',' + rp + aPart + rp + ',-' + rp +
                aPart + '-' + rp + ',-' + rp + 'Z';
        }
    },
    'star-diamond': {
        n: 22,
        f: r => {
            var rp = d3round(r * 1.4, 2);
            var rc = d3round(r * 1.9, 2);
            var aPart = 'A ' + rc + ',' + rc + ' 0 0 1 ';
            return 'M-' + rp + ',0' + aPart + '0,' + rp +
                aPart + rp + ',0' + aPart + '0,-' + rp +
                aPart + '-' + rp + ',0' + 'Z';
        }
    },
    'diamond-tall': {
        n: 23,
        f: r => {
            var x = d3round(r * 0.7, 2);
            var y = d3round(r * 1.4, 2);
            return 'M0,' + y + 'L' + x + ',0L0,-' + y + 'L-' + x + ',0Z';
        }
    },
    'diamond-wide': {
        n: 24,
        f: r => {
            var x = d3round(r * 1.4, 2);
            var y = d3round(r * 0.7, 2);
            return 'M0,' + y + 'L' + x + ',0L0,-' + y + 'L-' + x + ',0Z';
        }
    },
    hourglass: {
        n: 25,
        f: r => {
            var rs = d3round(r, 2);
            return 'M' + rs + ',' + rs + 'H-' + rs + 'L' + rs + ',-' + rs + 'H-' + rs + 'Z';
        },
        noDot: true
    },
    bowtie: {
        n: 26,
        f: r => {
            var rs = d3round(r, 2);
            return 'M' + rs + ',' + rs + 'V-' + rs + 'L-' + rs + ',' + rs + 'V-' + rs + 'Z';
        },
        noDot: true
    },
    'circle-cross': {
        n: 27,
        f: r => {
            var rs = d3round(r, 2);
            return 'M0,' + rs + 'V-' + rs + 'M' + rs + ',0H-' + rs +
                'M' + rs + ',0A' + rs + ',' + rs + ' 0 1,1 0,-' + rs +
                'A' + rs + ',' + rs + ' 0 0,1 ' + rs + ',0Z';
        },
        needLine: true,
        noDot: true
    },
    'circle-x': {
        n: 28,
        f: r => {
            var rs = d3round(r, 2);
            var rc = d3round(r / Math.sqrt(2), 2);
            return 'M' + rc + ',' + rc + 'L-' + rc + ',-' + rc +
                'M' + rc + ',-' + rc + 'L-' + rc + ',' + rc +
                'M' + rs + ',0A' + rs + ',' + rs + ' 0 1,1 0,-' + rs +
                'A' + rs + ',' + rs + ' 0 0,1 ' + rs + ',0Z';
        },
        needLine: true,
        noDot: true
    },
    'square-cross': {
        n: 29,
        f: r => {
            var rs = d3round(r, 2);
            return 'M0,' + rs + 'V-' + rs + 'M' + rs + ',0H-' + rs +
                'M' + rs + ',' + rs + 'H-' + rs + 'V-' + rs + 'H' + rs + 'Z';
        },
        needLine: true,
        noDot: true
    },
    'square-x': {
        n: 30,
        f: r => {
            var rs = d3round(r, 2);
            return 'M' + rs + ',' + rs + 'L-' + rs + ',-' + rs +
                'M' + rs + ',-' + rs + 'L-' + rs + ',' + rs +
                'M' + rs + ',' + rs + 'H-' + rs + 'V-' + rs + 'H' + rs + 'Z';
        },
        needLine: true,
        noDot: true
    },
    'diamond-cross': {
        n: 31,
        f: r => {
            var rd = d3round(r * 1.3, 2);
            return 'M' + rd + ',0L0,' + rd + 'L-' + rd + ',0L0,-' + rd + 'Z' +
                'M0,-' + rd + 'V' + rd + 'M-' + rd + ',0H' + rd;
        },
        needLine: true,
        noDot: true
    },
    'diamond-x': {
        n: 32,
        f: r => {
            var rd = d3round(r * 1.3, 2);
            var r2 = d3round(r * 0.65, 2);
            return 'M' + rd + ',0L0,' + rd + 'L-' + rd + ',0L0,-' + rd + 'Z' +
                'M-' + r2 + ',-' + r2 + 'L' + r2 + ',' + r2 +
                'M-' + r2 + ',' + r2 + 'L' + r2 + ',-' + r2;
        },
        needLine: true,
        noDot: true
    },
    'cross-thin': {
        n: 33,
        f: r => {
            var rc = d3round(r * 1.4, 2);
            return 'M0,' + rc + 'V-' + rc + 'M' + rc + ',0H-' + rc;
        },
        needLine: true,
        noDot: true,
        noFill: true
    },
    'x-thin': {
        n: 34,
        f: r => {
            var rx = d3round(r, 2);
            return 'M' + rx + ',' + rx + 'L-' + rx + ',-' + rx +
                'M' + rx + ',-' + rx + 'L-' + rx + ',' + rx;
        },
        needLine: true,
        noDot: true,
        noFill: true
    },
    asterisk: {
        n: 35,
        f: r => {
            var rc = d3round(r * 1.2, 2);
            var rs = d3round(r * 0.85, 2);
            return 'M0,' + rc + 'V-' + rc + 'M' + rc + ',0H-' + rc +
                'M' + rs + ',' + rs + 'L-' + rs + ',-' + rs +
                'M' + rs + ',-' + rs + 'L-' + rs + ',' + rs;
        },
        needLine: true,
        noDot: true,
        noFill: true
    },
    hash: {
        n: 36,
        f: r => {
            var r1 = d3round(r / 2, 2);
            var r2 = d3round(r, 2);
            return 'M' + r1 + ',' + r2 + 'V-' + r2 +
                'm-' + r2 + ',0V' + r2 +
                'M' + r2 + ',' + r1 + 'H-' + r2 +
                'm0,-' + r2 + 'H' + r2;
        },
        needLine: true,
        noFill: true
    },
    'y-up': {
        n: 37,
        f: r => {
            var x = d3round(r * 1.2, 2);
            var y0 = d3round(r * 1.6, 2);
            var y1 = d3round(r * 0.8, 2);
            return 'M-' + x + ',' + y1 + 'L0,0M' + x + ',' + y1 + 'L0,0M0,-' + y0 + 'L0,0';
        },
        needLine: true,
        noDot: true,
        noFill: true
    },
    'y-down': {
        n: 38,
        f: r => {
            var x = d3round(r * 1.2, 2);
            var y0 = d3round(r * 1.6, 2);
            var y1 = d3round(r * 0.8, 2);
            return 'M-' + x + ',-' + y1 + 'L0,0M' + x + ',-' + y1 + 'L0,0M0,' + y0 + 'L0,0';
        },
        needLine: true,
        noDot: true,
        noFill: true
    },
    'y-left': {
        n: 39,
        f: r => {
            var y = d3round(r * 1.2, 2);
            var x0 = d3round(r * 1.6, 2);
            var x1 = d3round(r * 0.8, 2);
            return 'M' + x1 + ',' + y + 'L0,0M' + x1 + ',-' + y + 'L0,0M-' + x0 + ',0L0,0';
        },
        needLine: true,
        noDot: true,
        noFill: true
    },
    'y-right': {
        n: 40,
        f: r => {
            var y = d3round(r * 1.2, 2);
            var x0 = d3round(r * 1.6, 2);
            var x1 = d3round(r * 0.8, 2);
            return 'M-' + x1 + ',' + y + 'L0,0M-' + x1 + ',-' + y + 'L0,0M' + x0 + ',0L0,0';
        },
        needLine: true,
        noDot: true,
        noFill: true
    },
    'line-ew': {
        n: 41,
        f: r => {
            var rc = d3round(r * 1.4, 2);
            return 'M' + rc + ',0H-' + rc;
        },
        needLine: true,
        noDot: true,
        noFill: true
    },
    'line-ns': {
        n: 42,
        f: r => {
            var rc = d3round(r * 1.4, 2);
            return 'M0,' + rc + 'V-' + rc;
        },
        needLine: true,
        noDot: true,
        noFill: true
    },
    'line-ne': {
        n: 43,
        f: r => {
            var rx = d3round(r, 2);
            return 'M' + rx + ',-' + rx + 'L-' + rx + ',' + rx;
        },
        needLine: true,
        noDot: true,
        noFill: true
    },
    'line-nw': {
        n: 44,
        f: r => {
            var rx = d3round(r, 2);
            return 'M' + rx + ',' + rx + 'L-' + rx + ',-' + rx;
        },
        needLine: true,
        noDot: true,
        noFill: true
    },
    'arrow-up': {
        n: 45,
        f: r => {
            var rx = d3round(r, 2);
            var ry = d3round(r * 2, 2);
            return 'M0,0L-' + rx + ',' + ry + 'H' + rx + 'Z';
        },
        noDot: true
    },
    'arrow-down': {
        n: 46,
        f: r => {
            var rx = d3round(r, 2);
            var ry = d3round(r * 2, 2);
            return 'M0,0L-' + rx + ',-' + ry + 'H' + rx + 'Z';
        },
        noDot: true
    },
    'arrow-left': {
        n: 47,
        f: r => {
            var rx = d3round(r * 2, 2);
            var ry = d3round(r, 2);
            return 'M0,0L' + rx + ',-' + ry + 'V' + ry + 'Z';
        },
        noDot: true
    },
    'arrow-right': {
        n: 48,
        f: r => {
            var rx = d3round(r * 2, 2);
            var ry = d3round(r, 2);
            return 'M0,0L-' + rx + ',-' + ry + 'V' + ry + 'Z';
        },
        noDot: true
    },
    'arrow-bar-up': {
        n: 49,
        f: r => {
            var rx = d3round(r, 2);
            var ry = d3round(r * 2, 2);
            return 'M-' + rx + ',0H' + rx + 'M0,0L-' + rx + ',' + ry + 'H' + rx + 'Z';
        },
        needLine: true,
        noDot: true
    },
    'arrow-bar-down': {
        n: 50,
        f: r => {
            var rx = d3round(r, 2);
            var ry = d3round(r * 2, 2);
            return 'M-' + rx + ',0H' + rx + 'M0,0L-' + rx + ',-' + ry + 'H' + rx + 'Z';
        },
        needLine: true,
        noDot: true
    },
    'arrow-bar-left': {
        n: 51,
        f: r => {
            var rx = d3round(r * 2, 2);
            var ry = d3round(r, 2);
            return 'M0,-' + ry + 'V' + ry + 'M0,0L' + rx + ',-' + ry + 'V' + ry + 'Z';
        },
        needLine: true,
        noDot: true
    },
    'arrow-bar-right': {
        n: 52,
        f: r => {
            var rx = d3round(r * 2, 2);
            var ry = d3round(r, 2);
            return 'M0,-' + ry + 'V' + ry + 'M0,0L-' + rx + ',-' + ry + 'V' + ry + 'Z';
        },
        needLine: true,
        noDot: true
    }
};

const DOTPATH = 'M0,0.5L0.5,0L0,-0.5L-0.5,0Z';

const drawing = {
    symbolFuncs: [],
};

/**
 * Create arrays of symbol functions.
 * https://plotly.com/javascript/reference/scatter/#scatter-marker-symbol
 */
Object.keys(SYMBOLDEFS).forEach(function(k) {
    var symDef = SYMBOLDEFS[k];
    var n = symDef.n;
    drawing.symbolFuncs[n] = symDef.f;
});

/**
 * Returns a <path></path> element that have to be placed in a <svg></svg> element.
 * 
 * @param {int} symbolNumber
 * @param {String} color
 * @return {Element}
 */
const createPathElement = (symbolNumber, color) => {
    const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
    // d is the shape of the symbol.
    path.setAttribute('d', createPathString(symbolNumber, 5));
    // Translation must be the half of the svg size to have the symbol centered.
    path.setAttribute('transform', 'translate(15, 15)');

    // If svg is type "open" or "open-dot" : https://plotly.com/javascript/reference/scatter/#scatter-marker-symbol
    if ((100 <= symbolNumber && symbolNumber < 200) || 300 <= symbolNumber) {
        path.setAttribute('stroke', color);
        path.setAttribute('stroke-width', 0.5);
        path.setAttribute('stroke-opacity', 1);
        path.setAttribute('fill', 'white');
    }

    // If svg is type "normal" or "dot" : https://plotly.com/javascript/reference/scatter/#scatter-marker-symbol
    if (symbolNumber < 100 || (200 <= symbolNumber && symbolNumber < 300)) {
        path.setAttribute('fill-opacity', 1);
        path.setAttribute('fill', color);
    }

    // If svg is type "dot" : https://plotly.com/javascript/reference/scatter/#scatter-marker-symbol
    if (200 <= symbolNumber && symbolNumber < 300) {
        path.setAttribute('stroke', 'black');
        path.setAttribute('stroke-width', 0.5);
        path.setAttribute('stroke-opacity', 1);
    }
    
    return path;
}

/**
 * Returns the string corresponding of the symbol shape requested by symbolNumber.
 * 
 * @param {int} symbolNumber
 * @param {int} r size of the symbol (currently, we request a 5)
 * @returns {String} this string must be placed in the "d" attribute of <path></path> SVG element.
 */
function createPathString(symbolNumber, r) {
    var base = symbolNumber % 100;
    return drawing.symbolFuncs[base](r) + (symbolNumber >= 200 ? DOTPATH : '');
}

            const NON_CONVERGENT_COLOR = 'rgba(0.8627, 0.8627, 0.8627)'

/*
 * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 * STATE MANAGEMENT
 * 
 * The state represent the plot state. It's an object
 * that is stored into the window.state variable.
 * 
 * Do not manually update window.state,
 * instead, foreach state modification,
 * you shoud call the setState() function
 * to keep the plot in sync with its state.
 * 
 * The state contains the following keys :
 *   - dataset (string),
 *   - objective (string),
 *   - objective_column (string),
 *   - plot_kind (string),
 *   - scale (string)
 *   - with_quantiles (boolean)
 *   - hidden_solvers (array)
 * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 */

/**
 * Update the state and create/update the plot
 * using the new state.
 * 
 * @param {Object} partialState 
 */
const setState = (partialState) => {
  window.state = {...state(), ...partialState};
  displayScatterElements(!isBarChart());
  makePlot();
  makeLegend();
}

/**
 * Retrieve the state object from window.state
 * 
 * @returns Object
 */
const state = () => window.state;

/*
 * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 * PLOT MANAGEMENT
 * 
 * Retrieve formatted data for PlotlyJS using state
 * and create/update the plot.
 * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 */

/**
 * Create/Update the plot.
 */
const makePlot = () => {
  const div = document.getElementById('unique_plot');
  const data = isBarChart() ? getBarData() : getScatterCurves();
  const layout = isBarChart() ? getBarChartLayout() : getScatterChartLayout();

  Plotly.react(div, data, layout);
};

/**
 * Gives the data formatted for plotlyJS bar chart.
 * 
 * @returns {array}
 */
const getBarData = () => {
  if (!isAvailable()) return [{type:'bar'}];

  const {x, y, colors, texts} = barDataToArrays()

  // Add bars
  const barData = [{
    type: 'bar',
    x: x,
    y: y,
    marker: {
      color: colors,
    },
    text: texts,
    textposition: 'inside',
    insidetextanchor: 'middle',
    textangle: '-90',
  }];

  x.forEach(solver => {
    // Add times for each convergent solver
    // Check if text is not 'Did not converge'
    if (data(solver).bar.text === '') {
      let nbTimes = data(solver).bar.times.length

      barData.push({
        type: 'scatter',
        x: new Array(nbTimes).fill(solver),
        y: data(solver).bar.times,
        marker: {
          color: 'black',
          symbol: 'line-ew-open'
        },
        line: {
          width: 0
        },
      });
    }
  });

  return barData;
};

/**
 * Gives the data formatted for plotlyJS scatter chart.
 * 
 * @returns {array}
 */
const getScatterCurves = () => {
  // create a list of object to plot in plotly
  const curves = [];

  // For each solver, add the median curve with proper style and visibility.
  getSolvers().forEach(solver => {
    curves.push({
      type: 'scatter',
      name: solver,
      mode: 'lines+markers',
      line: {
        color: data(solver).color,
      },
      marker: {
        symbol: data(solver).marker,
        size: 10,
      },
      legendgroup: solver,
      hovertemplate: solver + ' <br> (%{x:.1e},%{y:.1e}) <extra></extra>',
      visible: isVisible(solver) ? true : 'legendonly',
      x: data(solver).scatter.x,
      y: useTransformer(data(solver).scatter.y, 'y', data().transformers),
    });

    if (state().with_quantiles) {
      // Add shaded area for each solver, with proper style and visibility.
      curves.push({
        type: 'scatter',
        mode: 'lines',
        showlegend: false,
        line: {
          width: 0,
          color: data(solver).color,
        },
        legendgroup: solver,
        hovertemplate: '(%{x:.1e},%{y:.1e}) <extra></extra>',
        visible: isVisible(solver) ? true : 'legendonly',
        x: data(solver).scatter.q1,
        y: data(solver).scatter.y,
      }, {
        type: 'scatter',
        mode: 'lines',
        showlegend: false,
        fill: 'tonextx',
        line: {
          width: 0,
          color: data(solver).color,
        },
        legendgroup: solver,
        hovertemplate: '(%{x:.1e},%{y:.1e}) <extra></extra>',
        visible: isVisible(solver) ? true : 'legendonly',
        x: data(solver).scatter.q9,
        y: data(solver).scatter.y,
      });
    }
  });

  return curves;
};

/*
 * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 * DATA TRANSFORMERS
 * 
 * Transformers are used to modify data
 * on the fly.
 * 
 * WARNING : If you add a new transformer function,
 * don't forget to register it in the object : window.tranformers,
 * at the end of this section.
 * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 */

/**
 * Select the right transformer according to the state.
 * If the requested transformer does not exists,
 * it returns raw data.
 * 
 * @param {Object} data 
 * @param {String} solver 
 * @param {String} axis it could be x, y, q1, q9
 * @returns {array}
 */
const useTransformer = (data, axis, options) => {
  try {
    let transformer = 'transformer_' + axis + '_' + state().plot_kind;
    return window.transformers[transformer](data, options);
  } catch(error) {
    return data;
  }
};

/**
 * Transform data on the y axis for subotimality curve.
 * 
 * @param {Object} data 
 * @param {String} solver 
 * @returns {array}
 */
const transformer_y_suboptimality_curve = (y, options) => {
  // Retrieve c_star value
  const c_star = options.c_star;
  
  // Compute suboptimality for each data
  return y.map(value => value - c_star);
};

/**
 * Transform data ont the y axis for relative suboptimality curve.
 * 
 * @param {Object} data 
 * @param {String} solver 
 * @returns {array}
 */
const transformer_y_relative_suboptimality_curve = (y, options) => {
  // Retrieve transformer values
  const c_star = options.c_star;
  const max_f_0 = options.max_f_0;

  // Compute relative suboptimality for each data
  return y.map(value => (value - c_star) / (max_f_0 - c_star));
};

/**
 * Store all the transformer functions to be callable
 * by the useTransformer function.
 */
window.transformers = {
  transformer_y_suboptimality_curve,
  transformer_y_relative_suboptimality_curve,
};

/*
 * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 * TOOLS
 * 
 * Various functions to simplify life.
 * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 */

const data = (solver = null) => {
  return solver ?
    window.data[state().dataset][state().objective][state().objective_column].solvers[solver]:
    window.data[state().dataset][state().objective][state().objective_column]
}

const getSolvers = () => Object.keys(data().solvers);

const isBarChart = () => state().plot_kind === 'bar_chart';

const isVisible = solver => !state().hidden_solvers.includes(solver);

const isSolverAvailable = solver => data(solver).scatter.y.filter(value => !isNaN(value)).length > 0

/**
 * Check for each solver
 * if data is available
 * 
 * @returns {Boolean}
 */
const isAvailable = () => {
  let isNotAvailable = true;

  getSolvers().forEach(solver => {
    if (isSolverAvailable(solver)) {
      isNotAvailable = false;
    }
  });

  return !isNotAvailable;
}

const displayScatterElements = shouldBeVisible => {
  if (shouldBeVisible) {
    document.getElementById('change_scaling').style.display = 'inline-block';
    document.getElementById('legend_title').style.display = 'block';
    document.getElementById('plot_legend').style.display = 'flex';
  } else {
    document.getElementById('change_scaling').style.display = 'none';
    document.getElementById('legend_title').style.display = 'none';
    document.getElementById('plot_legend').style.display = 'none';
  }
};

const barDataToArrays = () => {
  const colors = [], texts = [], x = [], y = [];

  getSolvers().forEach(solver => {
    x.push(solver);
    y.push(data(solver).bar.y);
    colors.push(data(solver).bar.text === '' ? data(solver).color : NON_CONVERGENT_COLOR);
    texts.push(data(solver).bar.text);
  });

  return {x, y, colors, texts}
}

const getScale = () => {
  switch (state().scale) {
    case 'loglog':
      return {
        xaxis: 'log',
        yaxis: 'log',
      };
    case "semilog-y":
      return {
        xaxis: 'linear',
        yaxis: 'log',
      };
    case "semilog-x":
      return {
        xaxis: 'log',
        yaxis: 'linear',
      };
    case "linear":
      return {
        xaxis: 'linear',
        yaxis: 'linear',
      };
    default:
      console.error('Unknown scale value : ' + state().scale);
  }
}

const getScatterChartLayout = () => {
  const layout = {
    width: 900,
    height: 700,
    autosize: false,
    showlegend: false,
    legend: {
      title: {
        text: 'Solvers',
      },
      orientation: 'h',
      xanchor: 'center',
      yanchor: 'top',
      y: -.2,
      x: .5
    },
    xaxis: {
      type: getScale().xaxis,
      title: 'Time [sec]',
      tickformat: '.1e',
      tickangle: -45,
      gridcolor: '#ffffff',
      zeroline : false,
    },
    yaxis: {
      type: getScale().yaxis,
      title: getYLabel(),
      tickformat: '.1e',
      gridcolor: '#ffffff',
      zeroline : false,
    },
    title: `${state().objective}\nData: ${state().dataset}`,
    plot_bgcolor: '#e5ecf6',
  };

  if (!isAvailable()) {
    layout.annotations = [{
      xref: 'paper',
      yref: 'paper',
      x: 0.5,
      y: 0.5,
      text: 'Not available',
      showarrow: false,
      font: {
        color: 'black',
        size: 32,
      }
    }];
  };

  return layout;
};

const getBarChartLayout = () => {
  const layout = {
    width: 900,
    height: 700,
    autosize: false,
    yaxis: {
      type: 'log',
      title: 'Time [sec]',
      tickformat: '.1e',
      gridcolor: '#ffffff',
    },
    xaxis: {
      tickangle: -60,
      ticktext: getSolvers(),
    },
    showlegend: false,
    title: `${state().objective}\nData: ${state().dataset}`,
    plot_bgcolor: '#e5ecf6',
  };

  if (!isAvailable()) {
    layout.annotations = [{
      xref: 'paper',
      yref: 'paper',
      x: 0.5,
      y: 0.5,
      text: 'Not available',
      showarrow: false,
      font: {
        color: 'black',
        size: 32,
      }
    }];
  };

  return layout;
};

const getYLabel = () => {
  switch(state().plot_kind) {
    case 'objective_curve':
      return 'F(x)';
    case 'suboptimality_curve':
      return 'F(x) - F(x*)';
    case 'relative_suboptimality_curve':
      return 'F(x) - F(x*) / F(x0) - F(x*)'
    case 'bar_chart':
      return 'Time [sec]';
    default:
      return 'unknown';
  };
};

/*
 * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 * MANAGE HIDDEN SOLVERS
 * 
 * Functions to hide/display and memorize solvers which were clicked
 * by user on the legend of the plot.
 * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 */
const getSolverFromEvent = event => {
  const target = event.currentTarget;

  for (let i = 0; i < target.children.length; i++) {
    if (target.children[i].className == 'solver') {
      return target.children[i].firstChild.nodeValue;
    }
  }

  return null;
};

const purgeHiddenSolvers = () => setState({hidden_solvers: []});

const hideAllSolversExcept = solver => {setState({hidden_solvers: getSolvers().filter(elmt => elmt !== solver)})};

const hideSolver = solver => isVisible(solver) ? setState({hidden_solvers: [...state().hidden_solvers, solver]}) : null;

const showSolver = solver => setState({hidden_solvers: state().hidden_solvers.filter(hidden => hidden !== solver)});

/**
 * Add or remove solver name from the list of hidden solvers.
 * 
 * @param {String} solver
 * @returns {void}
 */
const handleSolverClick = solver => {
  if (!isVisible(solver)) {
    showSolver(solver);

    return;
  }

  hideSolver(solver);
};

const handleSolverDoubleClick = solver => {
  // If all solvers except one are hidden, so double click should show all solvers
  if (state().hidden_solvers.length === getSolvers().length - 1) {
    purgeHiddenSolvers();

    return;
  }

  hideAllSolversExcept(solver);
};

/**
 * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 * MANAGE PLOT LEGEND
 * 
 * We don't use the plotly legend to keep control
 * on the size of the plot.
 * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 */

/**
 * Creates the legend at the bottom of the plot.
 */
const makeLegend = () => {
  const legend = document.getElementById('plot_legend');

  legend.innerHTML = '';

  Object.keys(data().solvers).forEach(solver => {
    const color = data().solvers[solver].color;
    const symbolNumber = data().solvers[solver].marker;

    legend.appendChild(createLegendItem(solver, color, symbolNumber));
  });
}

/**
 * Creates a legend item which contains the solver name,
 * the solver marker as an SVG and an horizontal bar with
 * the solver color.
 * 
 * @param {String} solver
 * @param {String} color
 * @param {int} symbolNumber
 * @retuns {HTMLElement}
 */
const createLegendItem = (solver, color, symbolNumber) => {
  // Create item container
  const item = document.createElement('div');
  item.style.display = 'flex';
  item.style.flexDirection = 'row';
  item.style.alignItems = 'center';
  item.style.position = 'relative';
  item.style.cursor = 'pointer';

  if (!isVisible(solver)) {
    item.style.opacity = 0.5;
  }

  // Click on a solver in the legend
  item.addEventListener('click', event => {
    solver = getSolverFromEvent(event);

    if (!getSolvers().includes(solver)) {
      console.error('An invalid solver has been handled during the click event.');

      return;
    }

    // In javascript we must simulate double click.
    // So first click is handled and kept in memory (window.clickedSolver)
    // during 500ms, if nothing else happen timeout will execute
    // single click function. However, if an other click happen during this
    // 500ms, it clears the timeout and execute the double click function.
    if (!window.clickedSolver) {
      window.clickedSolver = solver;

      // Timeout will execute single click function after 500ms
      window.clickedTimeout = setTimeout(() => {
        window.clickedSolver = null;
        
        handleSolverClick(solver);
      }, 500);
    } else if (window.clickedSolver === solver) {
      clearTimeout(window.clickedTimeout);
      window.clickedSolver = null;
      handleSolverDoubleClick(solver);
    }
  });

  // Create the HTML text node for the solver name in the legend
  const textContainer = document.createElement('div');
  textContainer.style.marginLeft = '0.5rem';
  textContainer.className = 'solver';
  textContainer.appendChild(document.createTextNode(solver));

  // Create the horizontal bar in the legend to represent the curve
  const hBar = document.createElement('div');
  hBar.style.height = '2px';
  hBar.style.width = '30px';
  hBar.style.backgroundColor = color;
  hBar.style.position = 'absolute';
  hBar.style.left = 0;
  hBar.style.zIndex = 10;

  // Append elements to the legend item
  item.appendChild(createSymbol(symbolNumber, color));
  item.appendChild(hBar);
  item.appendChild(textContainer);

  return item;
}

/**
 * Create the same svg symbol as plotly.
 * Returns an <svg> HTML Element
 * 
 * @param {int} symbolNumber 
 * @param {String} color 
 * @returns {HTMLElement}
 */
const createSymbol = (symbolNumber, color) => {
  const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');

  svg.setAttribute('width', 30);
  svg.setAttribute('height', 30);
  svg.style.zIndex = 20;

  // createPathElement() come from the local file symbols.js
  svg.appendChild(createPathElement(symbolNumber, color));

  return svg;
}

/**
 * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 * EVENT REGISTRATIONS
 * 
 * Some events are also registered in result.html.
 * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 */

/**
 * Listener on the system information "+" button
 */
document.getElementById('btn_subinfo').addEventListener('click', () => {
  const elmt = document.getElementById('subinfo');
  const plus = document.getElementById('btn_plus');
  const minus = document.getElementById('btn_minus');

  if (elmt.style.display === 'none') {
      elmt.style.display = 'block';
      plus.style.display = 'none';
      minus.style.display = 'inline';

      return;
  }

  elmt.style.display = 'none';
  plus.style.display = 'inline';
  minus.style.display = 'none';
});

        </script>
    </body>
</html>
